<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            max-width: 560px;
        }
    </style>
</head>
<script>	
	function validation(event) {
		//event.preventDefault();
		var uid 		= document.getElementById('userId');
		var pwd 		= document.getElementById('userPassword');	
		var rePwd 		= document.getElementById('rePassword');
		var phone  		= document.getElementById('phone');
		var email 		= document.getElementById('email');
		var pwdCheck 	= /^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,25}$/
		var regNum		= /^[0-9]+/g; // 문자열 내 모든 패턴 검색
		var regPhone 	= /^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/;
		var regEmail 	= /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/;
		
		if (uid.value.trim() == "") {
			alert("아이디를 입력하세요.");
			uid.focus();
			return false;
		}
		if (pwd.value.trim() == "") {
			alert("비밀번호를 입력하세요.");
			pwd.focus();
			return false;
		}
		if (phone.value.trim() == "") {
			alert("핸드폰 번호를 입력하세요.");
			phone.focus();
			return false;
		}
		if (email.value.trim() == "") {
			alert("이메일을 입력하세요.");
			email.focus();
			return false;
		}
		if (!pwdCheck.test(pwd.value)) {
			console.log(pwdCheck);
			console.log(pwd.value);
			alert("비밀번호는 영문자+숫자+특수문자 조합으로 8~25자리 사용해야 합니다.");
			pwd.focus();
			return false;
		}
		if (pwd.value != rePwd.value) {
			console.log(pwd.value);
			console.log(rePwd.value);
			alert("비밀번호가 일치하지 않습니다.");
			rePwd.focus();
			return false;
		}
		if (!regNum.test(phone.value)) {
			alert('전화번호는 숫자만 입력할 수 있습니다.');
			phone.focus();
			return false;
		}
		if (!regPhone.test(phone.value)) {
			alert('휴대전화 형식을 맞춰 다시 입력해주세요\n ex) 010-0000-0000');
			phone.focus();
			return false;
		}
		if (!regEmail.test(email.value)) {
			alert('이메일 형식에 맞춰 다시 입력해주세요\n ex) xxx@xxx.xxx');
			email.focus();
			return false;
		}		
		
		return true;
	}	
</script>
<body>

<div class="container">

    <div class="py-5 text-center">
        <h2>회원 가입 폼</h2>
    </div>

    <h4 class="mb-3">회원 가입</h4>

    <form action="signUp" th:action method="post" onsubmit="return validation(event);" >
		<div>
			<label for="userId">아이디</label> 
			<input type="text" id="userId" name="userId" class="form-control" placeholder="아이디를 입력하세요">
			<button type="button" class="btn btn-secondary" style="margin-top:3px;" onclick="id_check();">중복확인</button>
		</div>
		<div>
			<label for="userPassword">비밀번호</label> 
			<input type="password" id="userPassword" name="userPassword" class="form-control" placeholder="영문자+숫자+특수문자 조합">
		</div>
		<div>
			<label for="rePassword">비밀번호 확인</label> 
			<input type="password" id="rePassword" name="rePassword" class="form-control" >
		</div>
		<div>
			<label for="phone">핸드폰 번호</label> 
			<input type="text" id="phone" name="phone" class="form-control" placeholder="핸드폰 번호를 입력하세요 ex) 010-0000-0000">
		</div>
		<div>
			<label for="email">이메일</label> 
			<input type="text" id="email" name="email" class="form-control" placeholder="이메일을 입력하세요">
		</div>


			<hr class="my-4">

        <div class="row">
            <div class="col">
                <button class="w-100 btn btn-primary btn-lg" type="submit" >회원 등록</button>
            </div>
            <div class="col">
                <button class="w-100 btn btn-secondary btn-lg"
                        onclick="location.href='login.html'"
                        th:onclick="|location.href='@{/login}'|"
                        type="button">취소</button>
            </div>
        </div>

    </form>

</div> <!-- /container -->
</body>
</html>